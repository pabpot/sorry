<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I am sorry bubu</title>
    <style>
       #puzzle {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(3, 1fr);
    gap: 2px;
    width: 90vw;   /* take 90% of screen width */
    max-width: 500px;
    aspect-ratio: 1 / 1; /* keep it square */
    margin: auto;
}
.piece {
    width: 100%;
    height: 100%;
    object-fit: cover;
    cursor: pointer;
    border: 1px solid #ccc;
}

        
    </style>
</head>
<body>
    <h1>Photo Puzzle Game</h1>
    <div id="puzzle"></div>
    <button onclick="checkSolution()">Check Solution</button>
    <div id="message"></div>

    <script>
const pieces = ['1.png','2.png','3.png','4.png','5.png','6.png','7.png','8.png','9.png'];
const shuffledPieces = pieces.slice().sort(() => Math.random() - 0.5);

const puzzleDiv = document.getElementById('puzzle');
shuffledPieces.forEach(piece => {
    const img = document.createElement('img');
    img.src = piece;
    img.classList.add('piece');
    img.draggable = true;

    // Desktop drag events
    img.addEventListener('dragstart', dragStart);
    img.addEventListener('dragover', dragOver);
    img.addEventListener('drop', drop);

    // Mobile touch events
    img.addEventListener('touchstart', touchStart, { passive: false });
    img.addEventListener('touchend', touchEnd);

    puzzleDiv.appendChild(img);
});

let draggedPiece = null;
let touchedPiece = null;

function dragStart(e) {
    draggedPiece = e.target;
}

function dragOver(e) {
    e.preventDefault();
}

function drop(e) {
    e.preventDefault();
    swapPieces(draggedPiece, e.target);
}

// --- Mobile support ---
function touchStart(e) {
    touchedPiece = e.target;
    e.preventDefault(); // stop scroll
}

function touchEnd(e) {
    const touch = e.changedTouches[0];
    const target = document.elementFromPoint(touch.clientX, touch.clientY);
    if (target && target.classList.contains('piece')) {
        swapPieces(touchedPiece, target);
    }
}

function swapPieces(piece1, piece2) {
    if (!piece1 || !piece2 || piece1 === piece2) return;
    const tempSrc = piece1.src;
    piece1.src = piece2.src;
    piece2.src = tempSrc;
}

function checkSolution() {
    const currentPieces = Array.from(document.querySelectorAll('.piece'))
        .map(piece => piece.src.split('/').pop());
    if (JSON.stringify(currentPieces) === JSON.stringify(pieces)) {
        document.getElementById('message').innerHTML =
            "<h2>Congratulations! You've solved the puzzle!</h2><a href='prize.html'>Click here for your prize</a>";
    } else {
        document.getElementById('message').innerText = "Keep trying!";
    }
}
</script>

</body>
</html>